function e(a,c,d=!1){const b=document.createElement("button");b.onclick=c;b.innerText=a;b.dataset.action=a;b.style.display=d?"none":"";return b}
class f extends HTMLElement{static get observedAttributes(){return"no-headers no-dice-column roll-label clear-label output-dice-column delim".split(" ")}constructor(){super();this.h=this.g=null;this.j=1}connectedCallback(){if(this.isConnected){var a=this.querySelectorAll("table");if(0===a.length)console.warn("The <table-roller> element needs to wrap a <table> (e.g. as a child element), but could not find one.");else if(1<a.length)console.warn("The <table-roller> element wraps several tables, which is not supported. Wrap each table separately.");
else{this.g=a[0];a=document.createElement("div");a.style.display="flex";a.style.g="5px";a.append(e(this.u,this.s.bind(this)),e(this.i,this.B.bind(this),!0));this.g.after(a);var c=a.after;this.h=document.createElement("div");c.call(a,this.h);this.j=1}}}get m(){return this.hasAttribute("output-dice-column")}get u(){return this.getAttribute("roll-label")??"Roll"}get i(){return this.getAttribute("clear-label")??"Clear"}get l(){return this.hasAttribute("no-headers")}get D(){return this.hasAttribute("no-dice-column")}get C(){return this.getAttribute("delim")??
" "}get A(){return Array.from(this.g.querySelectorAll(`tr${this.l?"":":not(:first-child)"}`))}get v(){return this.g.querySelectorAll("tr:first-child td").length}get o(){const a=this.v,c=this.A;var d=this.D?0:1;const b=[];for(;d<a;++d)b.push(this.g.querySelector(`tr:nth-child(${1+(Math.floor(Math.random()*c.length)+(this.l?0:1))}) td:nth-child(${1+d})`)?.innerText??"");return b.join(this.C)}s(){var a=this.h,c=a.append,d=this.o;const b=document.createElement("div"),g=this.m?`${this.j++}. `:"";b.innerText=
`${g} ${d}`;c.call(a,b);this.querySelector(`[data-action="${this.i}"]`).style.display=""}B(){this.h.innerHTML="";this.querySelector(`[data-action="${this.i}"]`).style.display="none";this.j=1}}customElements.define("table-roller",f);
